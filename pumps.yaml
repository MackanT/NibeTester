pumps:
  - model: "nibe_360P"
    name: "NIBE FIGHTER 360P"
    manufacturer: "NIBE"
    description: "NIBE FIGHTER 360P värmepump"
    baudrate: 19200
    bit_mode: 9
    parity: "MARK"
    cmd_data: 0xC0
    master_addr: 0x24
    rcu_addr: 0x14
    ack: 0x06
    enq: 0x05
    nak: 0x15
    etx: 0x03

    registers:
      - id: 0x00
        name: "Produktkod"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: ""
        min_value: null
        max_value: null
        step_size: null
      - id: 0x01
        name: "Utetemperatur"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M4.0"
      - id: 0x02
        name: "Temperatur VV-givare"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M1.0"
      - id: 0x03
        name: "Avluftstemperatur"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M5.1"
      - id: 0x04
        name: "Frånluftstemperatur"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M5.2"
      - id: 0x05
        name: "Förångartemperatur"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M5.0"
      - id: 0x06
        name: "Framledningstemp."
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M2.0"
      - id: 0x07
        name: "Returtemperatur"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M2.6"
      - id: 0x08
        name: "Temperatur kompressorgivare"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M1.1"
      - id: 0x09
        name: "Temperatur elpatrongivare"
        size: 2
        factor: 10.0
        unit: "°C"
        writable: false
        menu_structure: "M1.2"
      - id: 0x0B
        name: "Kurvlutning"
        size: 1
        factor: 1.0
        unit: ""
        writable: true
        data_type: "s8"  # Fixed: 1-byte register should use s8, not s16
        menu_structure: "M2.1"
        min_value: -1
        max_value: 15
        step_size: 1
      - id: 0x0C
        name: "Förskjutning värmekurva"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M2.2"
        min_value: -10
        max_value: 10
      - id: 0x0D
        name: "Beräknad framledningstemp."
        size: 1
        factor: 1.0
        unit: "°C"
        writable: false
        menu_structure: "M2.0"
      - id: 0x13
        name: "Kompressor & Cirkulationspumpar"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: ""
        bit_fields:
          - name: "Kompressor"
            mask: 0x02
            sort_order: 1
            value_map:
              0: "Från"
              1: "Till"
            writable: false
          - name: "Cirkulationspump 1"
            mask: 0x40
            sort_order: 2
            value_map:
              0: "Från"
              1: "Till"
            writable: false
            menu_structure: "M9.1.4"
          - name: "Cirkulationspump 2"
            mask: 0x01
            sort_order: 3
            value_map:
              0: "Från"
              1: "Till"
            writable: false
      - id: 0x14
        name: "Tillsatsvärme, Driftläge, Säsong mm."
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: ""
        bit_fields:
          - name: "Tillsatsvärme"
            mask: 0xE000
            sort_order: 1
            value_map:
              0: "Från"
              1: "Elsteg I (3kW)"
              2: "Elsteg II (4.5kW)"
              3: "Elsteg III (6kW)"
              4: "Elsteg I + II (7.5kW)"
              5: "Elsteg I + III (9kW)"
              6: "Elsteg II + III (10.5kW)"
              7: "Elsteg I + II + III (13.5kW)"
            writable: false
          - name: "Driftläge säsong"
            mask: 0x0030
            sort_order: 2
            value_map:
              0: "Sommar"
              1: "Vår/Höst"
              2: "Vinter"
            writable: true
            data_type: "bitfield"
          - name: "Elpanna"
            mask: 0x0100
            sort_order: 3
            value_map:
              0: "Från"
              1: "Till"
            writable: true
            data_type: "bit"
            menu_structure: "M9.1.1.1"
          - name: "Fläkthastighet"
            mask: 0x1800
            sort_order: 4
            value_map:
              0: "Från"
              1: "Hast I"
              2: "Normal"
              3: "Hast II"
            writable: false
            data_type: "bitfield"
          - name: "Avfrostning"
            mask: 0x0400
            sort_order: 5
            value_map:
              0: "Från"
              1: "Till"
            writable: false
          - name: "Kompensering yttre (indikation om aktiv)"
            mask: 0x0004
            sort_order: 6
            value_map:
              0: "Från"
              1: "Till"
            writable: false
          - name: "Kompensering yttre 2 (indikation om aktiv)"
            mask: 0x0008
            sort_order: 7
            value_map:
              0: "Från"
              1: "Till"
            writable: false

      - id: 0x15
        name: "Driftläge  & Varmvatten"
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M8.2.1"
        bit_fields:
          - name: "Driftläge Auto"
            mask: 0x8000
            sort_order: 1
            value_map:
              0: "Från"
              1: "Till"
            writable: true
            data_type: "bit"
            menu_structure: "M8.2.1"
          - name: "Extra varmvatten"
            mask: 0x7000
            sort_order: 2
            value_map:
              0: "Från"
              1: "24 h"
              2: "12 h"
              3: "6 h"
              4: "3 h"
              5: "(5 används ej!)"
              6: "Periodisk"
              7: "Tidsinställd"
            writable: true
            data_type: "bitfield"
          - name: "Shuntgrupp 2"
            mask: 0x0100
            sort_order: 3
            value_map:
              0: "Från"
              1: "Till"
            writable: true
            data_type: "bit"
      - id: 0x16
        name: "Larm"
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: ""
        bit_fields:
          - name: "Högtryckslarm"
            mask: 0x0001
            sort_order: 1
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
          - name: "Lågtryckslarm"
            mask: 0x0002
            sort_order: 2
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
          - name: "Temperaturbegränsarlarm"
            mask: 0x0008
            sort_order: 3
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
          - name: "Filterlarm"
            mask: 0x0200
            sort_order: 4
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
          - name: "Givarfel"
            mask: 0x0100
            sort_order: 5
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
          - name: "Frånluftstemperaturslarm"
            mask: 0x0004
            sort_order: 6
            value_map:
              0: "Inget larm"
              1: "Larm"
            writable: false
      - id: 0x17
        name: "Strömförbrukning L1"
        size: 2
        factor: 10.0
        unit: "A"
        writable: false
        menu_structure: "M8.3.3"
      - id: 0x18
        name: "Strömförbrukning L2"
        size: 2
        factor: 10.0
        unit: "A"
        writable: false
        menu_structure: "M8.3.4"
      - id: 0x19
        name: "Strömförbrukning L3"
        size: 2
        factor: 10.0
        unit: "A"
        writable: false
        menu_structure: "M8.3.5"
      - id: 0x1A
        name: "Fabriksinställning"
        size: 1
        factor: 1.0
        unit: ""
        writable: true
        data_type: "bit"
        menu_structure: "M9.1.6"
      - id: 0x1B
        name: "Antal starter kompressor"
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M5.4"
      - id: 0x1C
        name: "Drifttid kompressor"
        size: 2
        factor: 1.0
        unit: "h"
        writable: false
        menu_structure: "M5.5"
      - id: 0x1D
        name: "Tidfaktor elpatron"
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M9.1.8"
      - id: 0x1E
        name: "Maxtemperatur framledning"
        size: 1
        factor: 1.0
        unit: "°C"
        writable: true
        data_type: "s16"
        menu_structure: "M2.4"
        min_value: 10
        max_value: 65
      - id: 0x1F
        name: "Mintemperatur framledning"
        size: 1
        factor: 1.0
        unit: "°C"
        writable: true
        data_type: "s16"
        menu_structure: "M2.3"
        min_value: 10
        max_value: 65
      - id: 0x22
        name: "Kompensering yttre"
        size: 1
        factor: 1.0
        unit: ""
        writable: true
        data_type: "s16"
        menu_structure: "M2.5"
        min_value: -10
        max_value: 10
        ignore: true
      - id: 0x24
        name: "Intervall per. extra VV"
        size: 1
        factor: 1.0
        unit: "dygn"
        writable: true
        data_type: "s16"
        menu_structure: "M1.3"
        min_value: 0
        max_value: 90
      - id: 0x25
        name: "Omstart och externa larm"
        size: 2
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: ""
        bit_fields:
          - name: "Starta om FIGHTER 360"
            mask: 0x0001
            sort_order: 1
            value_map:
              0: "(normalläge)"
              1: "Utför omstart"
            writable: true
            data_type: "bit"
          - name: "Extern larmsignal 1 (RCU D1 1)"
            mask: 0x0002
            sort_order: 2
            value_map:
              0: "Från"
              1: "Till"
            writable: false
          - name: "Extern larmsignal 2 (RCU D1 2)"
            mask: 0x0004
            sort_order: 3
            value_map:
              0: "Från"
              1: "Till"
            writable: false
          - name: "Golvtork"
            mask: 0x0008
            sort_order: 4
            value_map:
              0: "Från"
              1: "Till"
            writable: true
            data_type: "s16"
            menu_structure: "M9.2.1"

      - id: 0x26
        name: "RCU förskjutning 1 (Reg1)"
        size: 1
        factor: 1.0
        unit: ""
        writable: true
        data_type: "s16"
        menu_structure: "M2.7"
        min_value: -10
        max_value: 10
      - id: 0x28
        name: "Larmnivå frånluftstemperatur"
        size: 1
        factor: 1.0
        unit: "°C"
        writable: true
        data_type: "s16"
        menu_structure: "M5.6"
        min_value: 0
        max_value: 20
      - id: 0x29
        name: "Klocka: år"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.1"
      - id: 0x2A
        name: "Klocka: månad"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.1"
      - id: 0x2B
        name: "Klocka: dag"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.1"
      - id: 0x2C
        name: "Klocka: timma"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.2"
      - id: 0x2D
        name: "Klocka: minut"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.2"
      - id: 0x2E
        name: "Klocka: sekund"
        size: 1
        factor: 1.0
        unit: ""
        writable: false
        menu_structure: "M7.2"
